/*! Core Analytics v5.0.4 - Copyright (c) 2015-2019 NRK */
this.CA5=this.CA5||{},this.CA5["statistics/analytics"]=function(){"use strict";var e;(function(e,n){var t;t=function(){function m(){for(var e=arguments,n=0,t={};n<arguments.length;n++){var r=e[n];for(var o in r)t[o]=r[o]}return t}return function e(p){function f(e,n,t){var r;if("undefined"!=typeof document){if(1<arguments.length){if("number"==typeof(t=m({path:"/"},f.defaults,t)).expires){var o=new Date;o.setMilliseconds(o.getMilliseconds()+864e5*t.expires),t.expires=o}t.expires=t.expires?t.expires.toUTCString():"";try{r=JSON.stringify(n),/^[\{\[]/.test(r)&&(n=r)}catch(e){}n=p.write?p.write(n,e):encodeURIComponent(String(n)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=(e=(e=encodeURIComponent(String(e))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var a="";for(var i in t)t[i]&&(a+="; "+i,!0!==t[i]&&(a+="="+t[i]));return document.cookie=e+"="+n+a}e||(r={});for(var c=document.cookie?document.cookie.split("; "):[],s=/(%[0-9A-Z]{2})+/g,d=0;d<c.length;d++){var u=c[d].split("="),l=u.slice(1).join("=");this.json||'"'!==l.charAt(0)||(l=l.slice(1,-1));try{var g=u[0].replace(s,decodeURIComponent);if(l=p.read?p.read(l,g):p(l,g)||l.replace(s,decodeURIComponent),this.json)try{l=JSON.parse(l)}catch(e){}if(e===g){r=l;break}e||(r[g]=l)}catch(e){}}return r}}return(f.set=f).get=function(e){return f.call(f,e)},f.getJSON=function(){return f.apply({json:!0},[].slice.call(arguments))},f.defaults={},f.remove=function(e,n){f(e,"",m(n,{expires:-1}))},f.withConverter=e,f}(function(){})},e.exports=t()})(e={exports:{}},e.exports);function u(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];return e.filter(Boolean).forEach(function(n){Object.keys(n).forEach(function(e){return t[e]=n[e]})}),t}var o=function(){if("undefined"==typeof window)return function(){return null};var t=window.Element.prototype,r=t.matches||t.msMatchesSelector||t.webkitMatchesSelector;return function(e,n){if(t.closest)return e.closest(n);for(;e;e=e.parentElement)if(r.call(e,n))return e;return null}}();function t(e){return e.replace(/^www\./,"")}var n="https://www.google-analytics.com/collect",l="https://nrk-recommendations.appspot.com/collectPersonalEvent",a={contentId:"dimension1",title:"dimension2",year:"dimension3",month:"dimension4",day:"dimension5",referrerDomain:"dimension6",referrer:"dimension7",parentId:"dimension10"};return function(c){function s(e){for(var n=[],t=arguments.length-1;0<t--;)n[t]=arguments[t+1];try{window.ga.apply(window,[c.uuid+"."+e].concat(n))}catch(e){throw e}}function r(){var e=window.ga.getByName(c.uuid),i=e.get("sendHitTask");e.set("sendHitTask",function(e){var n="1"===e.get("dimension9")&&c.get("userId"),t=e.get("hitPayload").replace(/(^|&)cd9=[^&]*/g,""),r=n?"1":"0";if(e.set("hitPayload",t+"&cd9="+n),e.set("dimension9",r,!0),n){var o=new window.XMLHttpRequest,a=t+"&nrkUserId="+encodeURIComponent(n);o.open("POST",l,!0),o.send(a),c.log('Sending personalization task with user "'+n+'" to '+l+":\n"+a)}i(e)})}function e(n,e,t){var r=["eventCategory","eventAction","eventLabel","eventValue","nonInteraction"],o={dimension9:"event.personalization"===t?"1":"0"},a={};Array.isArray(n.ga)&&(n.ga=n.ga.reduce(function(e,n,t){return"object"==typeof n?u(e,n):e[r[t]]=n,e},{})),Object.keys(n.ga).forEach(function(e){-1===r.indexOf(e)?a[e]=n.ga[e]:o[e]=n.ga[e]});var i=parseInt(o.eventValue,10);return o.eventCategory?o.eventAction?o.hasOwnProperty("eventValue")&&isNaN(i)?e("error",new Error("Please provide a value as a number: "+JSON.stringify(o.eventValue))):(d({ga:a}),void s("send","event",o)):e("error",new Error("Please provide an action as a string")):e("error",new Error("Please provide a category as a string"))}function d(n){var t=n.ga||{},e=n.publishDate&&new Date(n.publishDate);e&&(isNaN(e)?c("error",new Error("publishDate is an InvalidDate. Check formatting")):(t[a.year]=e.getFullYear(),t[a.month]=e.getMonth()+1,t[a.day]=e.getDate())),c.get("userId")&&(t.dimension8="1"),Object.keys(n).forEach(function(e){a[e]&&(t[a[e]]=String(n[e]))}),s("set",t)}document.querySelector('link[href="'+n+'"]')||document.head.appendChild(u(document.createElement("link"),{rel:"preconnect",href:n,crossOrigin:!0})),document.addEventListener("click",function(e){var n=c.contains(o(e.target,"[data-ga-category]")),t=n&&n.hasAttribute("data-ga-value")&&[parseInt(n.getAttribute("data-ga-value"),10)];n&&c("event",{ga:[n.getAttribute("data-ga-category"),n.getAttribute("data-ga-action"),n.getAttribute("data-ga-label")].concat(t||[])})}),c.set("gaEmit",s),c.on("initialize",function(e){window.ga||(window.ga=function(){(window.ga.q=window.ga.q||[]).push(arguments)},window.ga.l=Math.round(window.performance.timeOrigin)||window.performance.timing.navigationStart),function(e){var n=e.src,t=e.onload;void 0===t&&(t=Function.prototype);var r=e.crossorigin;void 0===r&&(r=!0);var o=document.querySelector('script[src="'+n+'"]')||document.createElement("script"),a=o.queue=o.queue||[];a.length?a.push(t):o.parentNode?t(o):(a.push(t),o.async=!0,o.onload=function(){return a.splice(0).forEach(function(e){return e(o)})},o.setAttribute("src",n),r&&-1===n.indexOf("//localhost")&&o.setAttribute("crossorigin","anonymous"),document.head.appendChild(o))}({src:"https://www.google-analytics.com/analytics"+(c.debug?"_debug":"")+".js",crossorigin:!1});var n={name:c.uuid,trackingId:e.ga,cookieDomain:"auto"},t={anonymizeIp:!0,forceSSL:!0,transport:"beacon"};if(!n.trackingId)return c("error",new Error("Please provide a Google Analytics trackingId"));e.parentId&&(t[a.parentId]=e.parentId),e.clientId&&(n.clientId=e.clientId),c.set("gaTrackingId",n.trackingId),window.ga("create",n),window.ga(r),s("set",t)}),c.on("context",d),c.on("pageview",function(e){if(void 0===e&&(e={}),e.ga||(e.ga={}),e.contentId||c.log("You should provide a contentId when sending pageviews"),e.page&&"/"!==e.page[0])return c("error",new Error("The page parameter must be a string beginning with /"));var n;e.ga.title=e.title||document.title,e.ga.page=e.page||document.location.pathname+document.location.search,e.ga.hostname=t(e.hostname||document.location.hostname),e.referrer=t(document.referrer),e.referrerDomain=(n=e.referrer,u(document.createElement("a"),{href:n})).hostname,d(e),s("send","pageview",{dimension9:"1"})}),c.on("event",e),c.on("event.personalization",e)}}();
//# sourceMappingURL=analytics.min.js.map
