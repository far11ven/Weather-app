(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["ObservationsCards-ObservationsCards"],{"/9aa":function(e,t,a){var n=a("NykK"),r=a("ExA7"),i="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||r(e)&&n(e)==i}},"03A+":function(e,t,a){var n=a("JTzB"),r=a("ExA7"),i=Object.prototype,o=i.hasOwnProperty,c=i.propertyIsEnumerable,l=n(function(){return arguments}())?n:function(e){return r(e)&&o.call(e,"callee")&&!c.call(e,"callee")};e.exports=l},"2bzP":function(e,t,a){"use strict";var n=a("J4zp"),r=a.n(n),i=a("TSYQ"),o=a.n(i),c=a("sEfC"),l=a.n(c),s=a("q1tI"),u=a.n(s);function d(e,t){var a=Object(s.useCallback)(l()(e,t),[e,t]);Object(s.useEffect)(e,[]),Object(s.useEffect)((function(){return window.addEventListener("resize",a),function(){a.cancel(),window.removeEventListener("resize",a)}}),[a])}var v=a("FBcu"),m=a("yeBY");a.d(t,"a",(function(){return f}));var f=function(e){var t=e.trackingId,a=e.length,n=e.equalHeight,i=void 0===n||n,c=e.children,f=Object(v.a)(),h=Object(s.useRef)(null),p=Object(s.useState)(),g=r()(p,2),b=g[0],E=g[1],y=Object(s.useState)([]),_=r()(y,2),x=_[0],N=_[1],O=Object(s.useState)(!1),j=r()(O,2),w=j[0],k=j[1];d(Object(s.useCallback)((function(){if(null!=h.current){for(var e=h.current.getBoundingClientRect(),t=h.current.querySelectorAll(".card-list__card"),a=Array.from(t).map((function(e){var t=e.offsetLeft;return{left:t,right:t+e.offsetWidth}})),n=[],r=0;r<a.length;r++){for(var i=a[r],o=a.length-1;o>=r;o--){var c=a[o];if(c.right-i.left<e.width){n[r]={startIndex:r,endIndex:o,left:i.left,width:c.right-i.left};break}}if(n[r].endIndex===a.length-1)break}N(n)}}),[]),250);var I=Object(s.useCallback)((function(){if(null!=h.current){for(var e=h.current.getBoundingClientRect(),t=h.current.querySelectorAll(".card-list__card"),a=[],n=0;n<t.length;n++){var r=t[n].getBoundingClientRect();r.right<=e.right&&r.left>=e.left&&a.push(n)}E(a)}}),[]);d(I,250);var C,S,B,A=(C=Object(s.useCallback)((function(){!1===w&&(null!=t&&m.a.event("card_list","first_scroll",t),k(!0)),I()}),[w,t,I]),S=100,B=Object(s.useCallback)(l()(C,S),[C,S]),Object(s.useEffect)((function(){return function(){B.cancel()}}),[B]),Object(s.useCallback)(B,[C])),T=Object(s.useCallback)((function(e){null!=t&&m.a.event("card_list","click_peek_button",t),function(e){if(null==h.current)return;var t=h.current.querySelector(".card-list__card:nth-child(".concat(e+1,")"));if(null==t)return;var a=h.current.getBoundingClientRect(),n=t.getBoundingClientRect(),r=a.left+a.width/2,i=h.current.scrollLeft+n.left+n.width/2;h.current.scrollLeft=i-r}(e)}),[t]);var M=[];return s.Children.forEach(c,(function(e){null!=e&&M.push(e)})),u.a.createElement("div",{className:"card-list card-list--length-".concat(a),onScroll:A,ref:h},u.a.createElement("ol",{className:"card-list__list"},M.map((function(e,t){return u.a.createElement("li",{key:t,className:o()({"card-list__card":!0,"card-list__card--equal-height":i})},e,u.a.createElement("button",{className:"card-list__peek-button",hidden:null==b||b.includes(t),"aria-label":f.get("components/cardList/showCard"),onClick:function(){T(t)}}))}))),x.map((function(e,t){return u.a.createElement("div",{className:"card-list__card-set","data-index":t,key:t,style:{left:e.left,width:e.width}})})))}},AP2z:function(e,t,a){var n=a("nmnc"),r=Object.prototype,i=r.hasOwnProperty,o=r.toString,c=n?n.toStringTag:void 0;e.exports=function(e){var t=i.call(e,c),a=e[c];try{e[c]=void 0;var n=!0}catch(e){}var r=o.call(e);return n&&(t?e[c]=a:delete e[c]),r}},BiGR:function(e,t,a){var n=a("nmnc"),r=a("03A+"),i=a("Z0cm"),o=n?n.isConcatSpreadable:void 0;e.exports=function(e){return i(e)||r(e)||!!(o&&e&&e[o])}},CH3K:function(e,t){e.exports=function(e,t){for(var a=-1,n=t.length,r=e.length;++a<n;)e[r+a]=t[a];return e}},ExA7:function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},GoyQ:function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},JTzB:function(e,t,a){var n=a("NykK"),r=a("ExA7"),i="[object Arguments]";e.exports=function(e){return r(e)&&n(e)==i}},KfNM:function(e,t){var a=Object.prototype.toString;e.exports=function(e){return a.call(e)}},Kz5y:function(e,t,a){var n=a("WFqU"),r="object"==typeof self&&self&&self.Object===Object&&self,i=n||r||Function("return this")();e.exports=i},NGE1:function(e,t,a){"use strict";a.d(t,"e",(function(){return n})),a.d(t,"f",(function(){return r})),a.d(t,"h",(function(){return i})),a.d(t,"g",(function(){return o})),a.d(t,"i",(function(){return c})),a.d(t,"j",(function(){return l})),a.d(t,"k",(function(){return s})),a.d(t,"b",(function(){return u})),a.d(t,"c",(function(){return d})),a.d(t,"d",(function(){return v})),a.d(t,"a",(function(){return m}));var n="#0071f2",r="#00aafa",i="#aa00f2",o="#686a6c",c="#26292a",l="#8500bd",s="#8500bd",u="#5dca0a",d="#ffe600",v="#c60000",m="#aa00f2"},NykK:function(e,t,a){var n=a("nmnc"),r=a("AP2z"),i=a("KfNM"),o="[object Null]",c="[object Undefined]",l=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?c:o:l&&l in Object(e)?r(e):i(e)}},QIyF:function(e,t,a){var n=a("Kz5y");e.exports=function(){return n.Date.now()}},TYy9:function(e,t,a){var n=a("XGnz");e.exports=function(e){return(null==e?0:e.length)?n(e,1):[]}},VP7Q:function(e,t,a){"use strict";a.r(t);var n=a("v8/g"),r=a("2bzP"),i=a("lTwk"),o=a("FBcu"),c=a("fAui"),l=a("q1tI"),s=a.n(l),u=a("/MKj"),d=a("S8kc"),v=a("r0Wv"),m=Object(v.a)((function(e,t){var a=function(e){return e.observations}(e);return Object(v.b)(a,t)}),(function(e,t){return null==e.observationStationsByLocationId[t]?[]:e.observationStationsByLocationId[t].map((function(t){return e.observationStations[t]}))})),f=a("eR+e"),h=a("J4zp"),p=a.n(h),g=a("Pfsq"),b=a.n(g),E=a("EFXb"),y=a("aIUp"),_=a("1xnR"),x=a("i74f"),N=a("jJcU"),O=a("yGI6"),j=a("1D2o"),w=340,k=[3,4],I=function(e){var t=e.barInfo;return s.a.createElement("div",{className:"bar-graph-info"},t&&t.map((function(e){return s.a.createElement("div",{key:"".concat(e.type).concat(e.label),className:"bar-graph-legend-item"},s.a.createElement(C,{type:e.type,size:7}),e.label)})))};function C(e){var t="none";return"missing"===e.type?t="url(#missingBarPattern)":"precipitation"===e.type&&(t="url(#barGradient)"),s.a.createElement("svg",{width:e.size,height:e.size,viewBox:"0 0 ".concat(e.size," ").concat(e.size)},s.a.createElement("rect",{key:e.type,width:"100%",height:"100%",x:0,fill:t}))}var S=function(e){var t=e.labels,a=e.graphWidth,n=e.graphHeight,r=e.totalValues;return s.a.createElement("g",{transform:"translate(15,".concat(n+5,")"),width:a,height:20,className:"observations-bar-graph__axis-lines-units"},t.map((function(e,t){return s.a.createElement("text",{textAnchor:"middle",key:t,dx:5,dy:10,y:0,x:a/r*2*t},e)})))},B=function(e){var t=e.graphHeight,a=e.yAxisLinesAndLabels;return s.a.createElement("g",{height:t,width:10},a.map((function(e,t){return s.a.createElement("text",{textAnchor:"end",key:t,dx:-5,dy:3,x:15,y:e.yCord,className:"observations-bar-graph__axis-lines-units"},e.val)})))},A=a("0bCb"),T=function(e){var t=e.barPadding,a=void 0===t?4.5:t,n=e.bars,r=e.totalValues,i=e.showEvery,o=e.xAxisLabels,c=e.description,u=e.barInfo,d=s.a.createRef(),v=Object(l.useState)(void 0),m=p()(v,2),f=m[0],h=m[1];var g=n.filter(j.b).reduce(j.c,{min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY}),b=Object(A.a)(g,k,100,!0);g=b.reduce(j.c,g);var E=b.map((function(e){return{yCord:60-Object(A.c)(e,g,60),val:e}})),y=n.map((function(e){return void 0!==e?Object(A.c)(e,g,60):void 0})).map((function(e,t){return{height:e,width:w/r-a,xPos:w/r*t}})),_=void 0!==f?y[f]:void 0,x=o;return i&&(x=o.map((function(e,t){return t%i==0?e:void 0})).filter(j.b)),s.a.createElement("div",{className:"observations-bar-graph",onMouseMove:function(t){if(null!==d.current){var a=t.clientX,n=d.current.getBoundingClientRect(),r=w/(e.totalValues-1),i=a-n.left;i=Object(A.f)(i,0,n.right-n.left,0,w);var o=Math.round(i/r);void 0!==o&&y[o]?(h(o),e.handleBarChange(o)):(h(void 0),e.changeToInitialBars())}},onMouseLeave:function(){h(void 0),e.changeToInitialBars()},"aria-hidden":"true",role:"img"},s.a.createElement("svg",{className:"observations-bar-graph__graph",viewBox:"0 0 360 80",role:"img","aria-label":c},s.a.createElement("g",{ref:d,transform:"translate(15,0)",width:w,height:60},E.map((function(e,t){return s.a.createElement("line",{className:"observations-bar-graph__axis-lines",key:t,x1:0,x2:w,y1:e.yCord,y2:e.yCord})})),y.map((function(e,t){if(void 0!==e.height){var a=void 0===f?"url(#barGradient)":"url(#lighterBarGradient)";return s.a.createElement("rect",{key:t,width:e.width,height:e.height,x:e.xPos,y:60-e.height,fill:a})}return s.a.createElement("rect",{key:t,width:e.width,height:60,x:e.xPos,y:0,style:{fill:"url(#missingBarPattern)"}})})),void 0!==_&&s.a.createElement("rect",{key:"markedBar",width:_.width,height:_.height,x:_.xPos,y:60-(_.height?_.height:0),fill:"url(#barGradient)"})),s.a.createElement(S,{labels:x,graphWidth:w,graphHeight:60,totalValues:r})),s.a.createElement("svg",{className:"observations-bar-graph__y-axis",viewBox:"0 0 360 80"},s.a.createElement(B,{graphHeight:60,yAxisLinesAndLabels:E})),void 0!==u&&s.a.createElement(I,{barInfo:u}))},M=a("Wvx4"),L=function(e){return s.a.createElement("div",{className:"observations-error-message"},s.a.createElement(M.a,{className:"observations-error-message__icon",id:"icon-error",size:3}),s.a.createElement("div",{className:"observations-error-message__text"},e.errorMessage))},G=a("qw+2"),P=a("b1bT"),z=a("VOO9"),H=function(e){var t,a=Object(o.a)(),n=a.get("terminology/snowDepth/long"),r=a.get("observations/at"),i=a.get("terminology/precipitation/long"),c=a.get("observations/latestPrecipitation"),u=Object(N.c)(a.get("observations/errors/allDataMissing"),i.toLowerCase()),d=a.get("observations/missing"),v=a.get("observations/precipGraphDescription"),m=e.precipitation,f=e.snowDepth,h=e.stationId;void 0!==m&&(t=m.intervals);var g,b=void 0!==t&&t.some((function(e){return"number"==typeof e.value})),E=void 0!==f&&"number"==typeof f.depth,y=void 0!==t&&t.some((function(e){return void 0===e.value})),_=W(m),x=Object(l.useState)(_),j=p()(x,2),w=j[0],k=j[1],I=Object(l.useState)(c),C=p()(I,2),S=C[0],B=C[1],A=function(){B(c),k(_)},M=void 0!==m?m.intervals:void 0,H=void 0!==M?M.map((function(e){return e.value})):[void 0],D=void 0!==M?M.map((function(e){return O.a.create(e.time).format("HH")})):void 0;return void 0!==e.precipitation&&void 0!==e.precipitation.intervals||void 0!==e.snowDepth?void 0===w&&void 0===f?s.a.createElement("div",{className:"observations-card-content__error-all-missing"},s.a.createElement(L,{errorMessage:u})):s.a.createElement("div",{className:"observations-card-content"},b&&void 0!==w&&void 0!==S&&s.a.createElement("div",{className:"observations-card-content__top",role:"text"},s.a.createElement("div",{className:"observations-card-content__heading"},S),s.a.createElement("div",{className:"observations-card-content__body"},"number"==typeof w&&s.a.createElement(G.a,{value:w,valueClassName:"observations-card-content__observed-value"}),void 0===w&&s.a.createElement(G.a,{value:0}))),E&&void 0!==f&&void 0!==f.time&&void 0!==f.depth&&s.a.createElement("div",{className:"observations-card-content__top",role:"text"},s.a.createElement("div",{className:"observations-card-content__heading"},n," ",r," ",s.a.createElement(z.a,{timestamp:f.time})),s.a.createElement("div",{className:"observations-card-content__body"},s.a.createElement(P.a,{value:f.depth,decimal:!0,valueClassName:"observations-card-content__observed-value"}))),b&&void 0!==M&&void 0!==D&&void 0!==H&&s.a.createElement("div",{className:"observations-card-content__graph","aria-label":v},s.a.createElement(T,{xAxisLabels:D,bars:H,totalValues:M.length,stationId:h,showEvery:2,handleBarChange:function(e){if(void 0!==t){var a=O.a.create(t[e].time).format("HH"),n=O.a.create(t[e].time).add(1,"hours").format("HH"),r=t[e].value;void 0!==r?(B("".concat(i," ").concat(a,"–").concat(n)),k(r)):A()}},changeToInitialBars:A,barInfo:(g=[{type:"precipitation",label:i}],y&&g.push({type:"missing",label:d}),g),barPadding:4,description:v}))):s.a.createElement("div",{className:"observations-card-content__error-all-missing"},s.a.createElement(L,{errorMessage:u}))},W=function(e){return e&&e.intervals?e.intervals.map((function(e){return e.value})).filter(j.b).reduce(j.d,0):0},D=a("hd+n"),F=a("NGE1"),R=a("tGdh"),q=a("B+SF"),U=a.n(q),V=function(e){var t=e.graphWidth,a=e.graphHeight,n=e.yAxisLabels,r=e.gRef;return s.a.createElement("g",{ref:r,transform:"translate(15,0)",width:t,height:a},n.map((function(e,a){var n=e.yCord;return 0!==e.val?s.a.createElement("line",{className:"observations-line-graph__axis-lines",key:a,x1:0,x2:t,y1:n,y2:n}):s.a.createElement("line",{className:"observations-line-graph__axis-lines observations-line-graph__axis-lines--zero",key:a,x1:0,x2:t,y1:n,y2:n})})))},K=function(e){var t=e.lineInfo,a=e.legendTextClassName,n=t.filter((function(e){return e.isMissing})).map((function(e,t){return s.a.createElement("div",{key:"".concat(t).concat(e.label),className:"observations-line-graph-legend__item ".concat(a)},s.a.createElement(X,null),e.label)})),r=t.filter((function(e){return!e.isMissing})).map((function(e,t){return s.a.createElement("div",{key:"".concat(t).concat(e.label),className:"observations-line-graph-legend__item ".concat(a)},1===e.color.length&&s.a.createElement(Y,{color:e.color[0],key:"".concat(e.color[0],"-lineIcon")}),e.color.length>1&&s.a.createElement(Q,{upperColor:e.color[0],bottomColor:e.color[1]}),e.label)}));return s.a.createElement("div",{className:"observations-line-graph-legend"},n,r)};function Y(e){return s.a.createElement("svg",{className:"observations-line-graph-legend__line",viewBox:"0 0 10 10"},s.a.createElement("line",{x1:0,x2:10,y1:5,y2:5,stroke:e.color,strokeWidth:1.2}))}function Q(e){return s.a.createElement("svg",{className:"observations-line-graph-legend__line",viewBox:"0 0 10 10"},s.a.createElement("line",{x1:0,x2:10,y1:4,y2:4,stroke:e.upperColor,strokeWidth:1.2}),s.a.createElement("line",{x1:0,x2:10,y1:7,y2:7,stroke:e.bottomColor,strokeWidth:1.2}))}function X(){return s.a.createElement("svg",{className:"observations-line-graph-legend__line",viewBox:"0 0 10 10"},s.a.createElement("line",{x1:0,x2:10,y1:5,y2:5,strokeWidth:1.2,strokeDasharray:"2",stroke:"gray",opacity:.3}))}var J=function(e){var t=e.yCoord,a=e.graphHeight,n=e.graphWidth,r=e.xCoord;return s.a.createElement("g",{transform:"translate(15,0)",width:n,height:a},t.map((function(e,t){return void 0!==r&&void 0!==e.coordinate&&r<=n&&e.coordinate<=a?0===t?s.a.createElement(s.a.Fragment,{key:"frag-".concat(t)},s.a.createElement("line",{className:"observations-line-graph__marker-line",x1:r,x2:r,y1:0,y2:a}),s.a.createElement("circle",{cx:r,cy:e.coordinate,stroke:e.color,fill:e.color,r:2.5}),")"):s.a.createElement("circle",{key:"circle-".concat(t),cx:r,cy:e.coordinate,stroke:e.color,fill:e.color,r:2.5}):null})))},$=function(e){var t=e.labelsClassName,a=e.graphHeight,n=e.graphWidth,r=e.horizontalTimePoints,i=e.maxLabels,o=r.map((function(e){return O.a.create(e).format("HH")}));o=o.filter((function(e,t){return!(t>0)||e!==o[t-1]}));for(var c=1;o.length/c>i;)c+=1;o=o.map((function(e,t){return t%c==0?e:void 0})).filter(j.b);return s.a.createElement("g",{transform:"translate(15,".concat(a+5,")"),width:n,height:20},o.map((function(e,a){return s.a.createElement("text",{textAnchor:"middle",key:a,dx:5,dy:10,x:(i=e,o=r,c=o.findIndex((function(e){return O.a.create(e).format("HH")===i})),n/(o.length-1)*c),className:"observations-line-graph__x-axis ".concat(t)},e);var i,o,c})))},Z=function(e){var t=e.graphHeight,a=e.labels,n=e.unit,r=e.labelsClassName;return s.a.createElement("g",{width:20,height:t,transform:"translate(15,0)"},a.map((function(e,t){var a=e.yCord,i=e.val;return s.a.createElement("text",{textAnchor:"end",key:t,dx:-5,dy:3,y:a,className:"observations-line-graph__y-axis ".concat(r)},"".concat(i).concat(n))})))},ee=a("TYy9"),te=a.n(ee),ae=function(e){var t=e.lines,a=e.yAxisUnit,n=void 0===a?"":a,r=e.uniqueId,i=e.globalColor,o=e.lineInfo,c=e.description,u=e.onlyPositiveYAxisValues,d=void 0!==u&&u,v="black",m=Object(l.useState)(void 0),f=p()(m,2),h=f[0],g=f[1],b=Object(l.useState)([{coordinate:void 0,color:v}]),E=p()(b,2),y=E[0],_=E[1],x=s.a.createRef(),N=function(e){var t=[];if(e.forEach((function(e){e.intervals.forEach((function(e){var a=O.a.create(e.time);if(!t.includes(e.time)){var n=t.findIndex((function(e){return a.isBefore(O.a.create(e))}));n<0?t.push(e.time):t.splice(n,0,e.time)}}))})),t.length<=1&&t[0]){var a=O.a.create(t[0]),n=a.subtract(1,"hour").toString(),r=a.subtract(2,"hour").toString();t.unshift(n),t.unshift(r)}return t}(t),I=r,C="url(#".concat(r,")"),S={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};var B=function(e,t){var a=N,n=a.findIndex((function(t){return t===e}));return t?w/(a.length-1)*(n+t):w/(a.length-1)*n};(function(e,t){var a=[];return e.forEach((function(e){e.intervals.length>1?a.push(e.intervals.map((function(e){return e.value})).filter(j.b).reduce(j.c,t)):1===e.intervals.length&&void 0!==e.intervals[0].value?a.push(e.intervals[0].value>0?{min:0,max:e.intervals[0].value}:{min:e.intervals[0].value,max:0}):a.push({min:0,max:0})})),a})(t,S).forEach((function(e){e.min<S.min&&(S.min=e.min),e.max>S.max&&(S.max=e.max)}));var T=Object(A.a)(S,k,100,d);S=T.reduce(j.c,S);var M=T.map((function(e){return{yCord:60-Object(A.c)(e,S,60),val:e}})),L=h,G=y.map((function(e){return{coordinate:void 0!==e.coordinate?60-Object(A.c)(e.coordinate,S,60):void 0,color:e.color}})),P=te()(t.map((function(e){return Object(A.b)(e.intervals,e.color?e.color:C)}))).map((function(e){var t=e.values.map((function(e){if(void 0!==e.value){var t=60-Object(A.c)(e.value,S,60);return[B(e.time),t]}return[]}));return{color:e.color,points:t}})),z=[];t.forEach((function(e){var t=[];e.intervals.forEach((function(e,a,n){void 0===e.value?(void 0!==n[a-1]&&void 0!==n[a-1].value&&t.push([B(n[a-1].time),60-Object(A.c)(n[a-1].value,S,60)]),n.length>0&&a===n.length-1&&t.length>0&&(t.push([B(e.time),t[t.length-1][1]]),z.push(t),t=[])):n.length>0&&a>0&&null==n[a-1].value&&(t.push([B(n[a].time),60-Object(A.c)(e.value,S,60)]),z.push(t),t=[])}))}));var H=i?Object(A.c)(i.limit,S,60):0;return s.a.createElement("div",{className:"observations-line-graph",onMouseMove:function(a){if(null!==x.current){var n=a.clientX,r=function(e,t,a,n,r,i,o){if(null!==i.current){var c=i.current.getBoundingClientRect(),l=e/(r.length-1),s=o-c.left;s=Object(A.f)(s,0,c.right-c.left,0,e);var u=Math.round(s/l),d=u*l,v=t.map((function(e){var t={coordinate:void 0,color:a};return e.intervals.forEach((function(i){if(i.time===r[u]){var o=a;void 0!==e.color?o=e.color:void 0!==n&&void 0!==i.value&&(o=i.value>=0?n.colorAbove:n.colorBelow),t={coordinate:i.value,color:o}}})),t}));return{xCoord:d,yCoord:v,index:u}}return{undefined:void 0}}(w,t,v,i,N,x,n),o=r.xCoord,c=r.yCoord,l=r.index;void 0!==o&&void 0!==c&&void 0!==l&&void 0!==N[l]?(g(o),_(c),e.updateMarkedPoint(N[l])):(g(void 0),_([{coordinate:void 0,color:v}]),e.changeToInitialGraph())}},onMouseLeave:function(){g(void 0),_([{coordinate:void 0,color:v}]),e.changeToInitialGraph()},"aria-hidden":"true",role:"img"},s.a.createElement("svg",{className:"observations-line-graph__graph",viewBox:"0 0 360 80",role:"img","aria-label":c},s.a.createElement("defs",null,i&&s.a.createElement("linearGradient",{id:I,gradientUnits:"userSpaceOnUse",x1:0,x2:0,y1:60,y2:0},s.a.createElement("stop",{offset:"".concat(H/60),stopColor:i.colorBelow}),s.a.createElement("stop",{offset:"".concat(H/60),stopColor:i.colorAbove}))),s.a.createElement(V,{graphWidth:w,graphHeight:60,yAxisLabels:M,gRef:x}),s.a.createElement("g",{ref:x,transform:"translate(15,0)",width:w,height:60},P.map((function(e,t){var a=e.points;return a.length>=3?s.a.createElement("path",{className:"observations-line-graph__path",key:t,d:U.a.svgPath(U.a.points(a)),stroke:e.color,strokeWidth:2}):a.length>=2?s.a.createElement("polyline",{className:"observations-line-graph__line",key:t,stroke:e.color,points:Object(A.e)(a),strokeWidth:2}):1===a.length?s.a.createElement("circle",{key:t,cx:a[0][0],cy:a[0][1],r:2,fill:e.color,stroke:e.color}):null})),z.length>0&&z.map((function(e,t){return s.a.createElement("polyline",{className:"observations-line-graph__missing-line",key:"gray-".concat(t),points:Object(A.e)(e),strokeWidth:2})}))),s.a.createElement(J,{yCoord:G,xCoord:L,graphHeight:60,graphWidth:w}),s.a.createElement($,{graphHeight:60,graphWidth:w,horizontalTimePoints:N,maxLabels:13,labelsClassName:"observations-line-graph__axis-lines-units"})),s.a.createElement("svg",{className:"observations-line-graph__y-axis",viewBox:"0 0 360 80"},s.a.createElement(Z,{graphHeight:60,labels:M,unit:n,labelsClassName:"observations-line-graph__axis-lines-units"})),o&&s.a.createElement(K,{lineInfo:o,legendTextClassName:"observations-line-graph__axis-lines-units"}))};var ne=function(e){var t=Object(o.a)(),a=t.get("terminology/temperature/long"),n=t.get("observations/at"),r=t.get("observations/missing"),i=t.get("observations/tempGraphDescription"),c=Object(N.c)(t.get("observations/errors/allDataMissing"),a.toLowerCase()),u=e.temperature,d=e.stationId,v=u?u.intervals:[],m=v.some((function(e){return void 0===e.value})),f=Object(A.d)(v),h=Object(l.useState)(null!=f&&null!=f.value?f.value:void 0),g=p()(h,2),b=g[0],E=g[1],y=Object(l.useState)(f?f.time:void 0),_=p()(y,2),x=_[0],O=_[1],j={colorAbove:R.e,limit:0,colorBelow:F.e},w=[{intervals:v.map((function(e){return{value:e.value,time:e.time}})),useGlobalColor:!0}],k=[];v.find((function(e){return void 0!==e.value&&e.value<0}))&&k.push(F.e),v.find((function(e){return void 0!==e.value&&e.value>=0}))&&k.push(R.e);var I=[{color:k,label:a,isMissing:!1}];m&&I.push({color:["missing"],label:r,isMissing:!0});return null==u?s.a.createElement("div",{className:"observations-card-content__error-all-missing"},s.a.createElement(L,{errorMessage:c})):void 0===b||void 0===x?s.a.createElement("div",{className:"observations-card-content__error-all-missing"},s.a.createElement(L,{errorMessage:c})):s.a.createElement("div",{className:"observations-card-content"},void 0!==b&&s.a.createElement("div",{className:"observations-card-content__top",role:"text"},s.a.createElement("div",{className:"observations-card-content__heading"},a," ",n," ",s.a.createElement(z.a,{timestamp:x})),s.a.createElement("div",{className:"observations-card-content__body"},s.a.createElement(D.a,{className:"observations-card-content__observed-value",value:parseFloat(b.toFixed(2)),decimal:!0}))),s.a.createElement("div",{className:"observations-card-content__graph","aria-label":i},s.a.createElement(ae,{lineInfo:I,horizontalPoints:v.length,uniqueId:"observationTemperatureGraph-".concat(d),lines:w,yAxisUnit:"°",updateMarkedPoint:function(e){var t=v.find((function(t){return t.time===e}));void 0!==t&&void 0!==t.value&&(E(t.value),O(t.time))},changeToInitialGraph:function(){E(f?f.value:void 0),O(f?f.time:void 0)},globalColor:j,padding:1,description:i})))},re=a("gvXC"),ie=function(e){var t=e.wind,a=e.stationId,n=Object(o.a)(),r=n.get("terminology/windSpeed/long"),i=n.get("terminology/windGust/long"),c=n.get("observations/at"),u=n.get("observations/missing"),d=n.get("observations/windGraphDescription"),v=Object(N.c)(n.get("observations/errors/allDataMissing"),r.toLowerCase()),m=t?t.intervals:[],f=m.map((function(e){return{value:e.speed,time:e.time,direction:e.direction}})),h=m.map((function(e){return e.gust?{value:e.gust,time:e.time}:void 0})).filter(j.b),g=Object(A.d)(f),b=Object(A.d)(h),E=void 0!==g,y=void 0!==b,_=E&&f.some((function(e){return void 0===e.value}))||y&&h.some((function(e){return void 0===e.value})),x=Object(l.useState)(g?g.value:void 0),O=p()(x,2),w=O[0],k=O[1],I=Object(l.useState)(g?g.time:void 0),C=p()(I,2),S=C[0],B=C[1],T=Object(l.useState)(g?g.direction:void 0),M=p()(T,2),G=M[0],P=M[1],H=Object(l.useState)(b?b.value:void 0),W=p()(H,2),D=W[0],R=W[1],q=Object(l.useState)(b?b.time:void 0),U=p()(q,2),V=U[0],K=U[1],Y=[],Q=[];y&&(Q.push({color:[F.g],label:i,isMissing:!1}),Y.push({intervals:h,color:F.g})),E&&(Q.push({color:[F.h],label:r,isMissing:!1}),Y.push({intervals:f,color:F.h})),_&&Q.push({color:["missing"],label:u,isMissing:!0});var X=function(){k(g?g.value:void 0),B(g?g.time:void 0),P(g?g.direction:void 0),R(b?b.value:void 0),K(b?b.time:void 0)};if(void 0===t||void 0===t.intervals)return s.a.createElement("div",{className:"observations-card-content__error-all-missing"},s.a.createElement(L,{errorMessage:v}));if(void 0===D&&void 0===w)return s.a.createElement("div",{className:"observations-card-content__error-all-missing"},s.a.createElement(L,{errorMessage:v}));var J=oe(w,G),$=oe(D,G);return s.a.createElement("div",{className:"observations-card-content"},void 0!==S&&void 0!==w&&s.a.createElement("div",{className:"observations-card-content__top",role:"text"},s.a.createElement("div",{className:"observations-card-content__heading"},r+" "+c," ",s.a.createElement(z.a,{timestamp:S})),s.a.createElement("div",{className:"observations-card-content__body"},J)),void 0!==D&&void 0!==V&&s.a.createElement("div",{className:"observations-card-content__top",role:"text"},s.a.createElement("div",{className:"observations-card-content__heading"},i+" "+c," ",s.a.createElement(z.a,{timestamp:V})),s.a.createElement("div",{className:"observations-card-content__body"},$)),s.a.createElement("div",{className:"observations-card-content__graph","aria-label":d},s.a.createElement(ae,{lineInfo:Q,uniqueId:"observationWindGraph-".concat(a),horizontalPoints:m.length,lines:Y,updateMarkedPoint:function(e){var t=f.find((function(t){return t.time===e})),a=h.find((function(t){return t.time===e}));void 0!==t&&void 0!==t.value&&void 0!==t.time?(k(t.value),B(t.time),void 0!==t.direction&&P(t.direction),void 0!==a&&(R(a.value),K(a.time))):void 0!==a&&void 0!==a.time&&void 0!==a.value?(R(a.value),K(a.time)):X()},changeToInitialGraph:X,padding:1,description:d,onlyPositiveYAxisValues:!0})))};function oe(e,t){return null!=e?null!=t?s.a.createElement(re.a,{value:e,decimal:!0,displayArrow:!0,direction:t,valueClassName:"observations-card-content__observed-value"}):s.a.createElement(re.a,{value:e,decimal:!0,valueClassName:"observations-card-content__observed-value"}):s.a.createElement("div",null)}var ce=function(e){var t=e.observationStation,a=e.currentLocationName,n=t.temperature,r=t.precipitation,i=t.wind,c=t.supported,u=t.supported.includes("temperature")?"temperature":"precipitation",d=Object(o.a)(),v=Object(l.useState)(u),m=p()(v,2),f=m[0],h=m[1],g=[c.includes("temperature")&&s.a.createElement("div",{key:"temperature",className:"observations-card__view observed-temperature"},s.a.createElement(ne,{temperature:n,stationId:t.stationId})),c.includes("precipitation")&&s.a.createElement("div",{key:"precipitation",className:"observations-card__view observed-precipitation"},s.a.createElement(H,{precipitation:r,stationId:t.stationId,snowDepth:t.snowDepth})),c.includes("wind")&&s.a.createElement("div",{key:"wind",className:"observations-card__view observed-wind"},s.a.createElement(ie,{wind:i,stationId:t.stationId}))],O=c.map((function(e){return{type:e,displayName:d.get("terminology/".concat(e,"/long"))}})),j=Object(E.a)({localeCode:d.get("code"),pageId:"statistics",subpageId:"graph",locationId:t.location.id,locationPath:t.location.urlPath}),w=t.location.isNorway?s.a.createElement("a",{href:j},t.location.name):t.location.name,k=t.location.elevation?"".concat(Object(N.c)(d.get("units/elevation"),t.location.elevation)," ").concat(d.get("units/metersAboveSealevel/short"),", "):"",I=Object(x.a)({meters:t.distance,from:a,locale:d}),C="".concat(k).concat(I);return s.a.createElement(y.a,{type:"card"},s.a.createElement(y.b,{title:w,subtitle:C}),s.a.createElement(b.a,null,s.a.createElement(_.a,{onChangeView:function(e){h(e.type)},activeViewType:f,views:O,className:"observations-card__view-switcher"}),s.a.createElement("div",null,g)))};a.d(t,"UnconnectedObservationsCards",(function(){return le})),a.d(t,"ObservationsCards",(function(){return se}));var le=function(e){var t=e.observationStations,a=e.currentLocationName,n=Object(o.a)();if(!t||0===t.length)return null;var c=t.filter((function(e){return e.supported.length>0})).map((function(e){return s.a.createElement(ce,{key:e.location.id,currentLocationName:a,observationStation:e})}));return s.a.createElement("div",{className:"observations-cards"},s.a.createElement(i.a,null),s.a.createElement(f.a,{level:"h2",typography:"header-2"},n.get("observations/title")),s.a.createElement(r.a,{length:3,trackingId:"observations-cards"},c))},se=Object(n.a)(Object(u.b)((function(e,t){var a=t.currentPage,n=Object(c.a)(a.details.params);return{observationStations:m(e,n),currentLocationName:Object(d.h)(e,n)}}))(le));t.default=se},WFqU:function(e,t,a){(function(t){var a="object"==typeof t&&t&&t.Object===Object&&t;e.exports=a}).call(this,a("yLpj"))},XGnz:function(e,t,a){var n=a("CH3K"),r=a("BiGR");e.exports=function e(t,a,i,o,c){var l=-1,s=t.length;for(i||(i=r),c||(c=[]);++l<s;){var u=t[l];a>0&&i(u)?a>1?e(u,a-1,i,o,c):n(c,u):o||(c[c.length]=u)}return c}},Z0cm:function(e,t){var a=Array.isArray;e.exports=a},aIUp:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),i=a("jz2H"),o=function(e){var t=e.children,a=e.renderFooter;return r.a.createElement("div",{className:"card card--empty","data-testid":"empty-state"},r.a.createElement("div",{className:"card__content"},r.a.createElement("div",{className:"card__header"},r.a.createElement("div",{className:"card__header-titles"},r.a.createElement(i.a,{className:"card__header-title",type:"h2",length:14}),r.a.createElement(i.a,{className:"card__header-subtitle",type:"p",length:8}))),t),a&&r.a.createElement("div",{className:"card__link-footer"}))},c=a("Wvx4"),l=function(e){return r.a.createElement("div",{className:"card__error"},r.a.createElement(c.a,{className:"card__error-icon",id:"icon-error",size:3}),r.a.createElement("p",{className:"card__error-text"},e.message))},s=a("al9T"),u=function(e){var t=e.text,a=e.link;return r.a.createElement("div",{className:"card__link-footer"},r.a.createElement("p",{className:"card__link-footer-link-text"},t," ",r.a.createElement(s.b,{"data-app-tracking-source":"card_footer",href:a.url,isExternal:!0,className:"card__link-footer-link"},a.text,r.a.createElement(c.a,{className:"card__link-footer-icon",id:"icon-new-window",size:2}))))},d=a("J4zp"),v=a.n(d),m=a("OaRz"),f=function(e){var t=e.title,a=e.subtitle,i=Object(n.useState)(!1),o=v()(i,2),c=o[0],l=o[1];return r.a.createElement("div",{className:"card__header"},r.a.createElement("h3",{className:"card__header-title"},t),r.a.createElement("p",{className:"card__header-subtitle"},a),h(e)&&r.a.createElement(m.a,{className:"card__header-info-button",id:e.infoButtonId,onClick:function(){return l(!c)}}),p(e)&&e.renderCustomInfoButton((function(){return l(!c)})),(p(e)||h(e))&&c&&e.renderInfoPanel(e.infoButtonId,(function(){return l(!c)})))},h=function(e){return!("renderCustomInfoButton"in e)&&"renderInfoPanel"in e},p=function(e){return"renderCustomInfoButton"in e};a.d(t,"a",(function(){return g})),a.d(t,"c",(function(){return u})),a.d(t,"b",(function(){return f}));var g=r.a.forwardRef((function(e,t){var a=e.type,n=void 0===a?"card":a;if("empty"===n){var i="children"in e?e.children:void 0,c="renderFooter"in e?e.renderFooter:void 0;return r.a.createElement(o,{renderFooter:c},i)}var s=function(e){var t="children"in e?e.children:void 0,a="errorMessage"in e?e.errorMessage:"",n="footer"in e?e.footer:void 0;return{children:t,errorMessage:a,footer:n}}(e),u=s.children,d=s.errorMessage,v=s.footer;return r.a.createElement("div",{ref:t,className:"card"},r.a.createElement("div",{className:"card__content"},"error"===n&&r.a.createElement("div",null,u,r.a.createElement(l,{message:d})),"card"===n&&u),null!=v?v:null)}))},b1bT:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a("Xr/R"),r=a("TSYQ"),i=a.n(r),o=a("15E1"),c=a("FBcu"),l=a("wXRo"),s=a("q1tI"),u=a.n(s),d=function(e){var t=e.value,a=e.className,r=e.valueClassName,s=e.unitClassName,d=e.displayUnit,v=void 0===d||d,m=e.decimal,f=void 0===m||m,h=e.renderScreenReaderLabel,p=void 0===h||h,g=Object(c.a)(),b=Object(l.a)(),E=n.a.units.snowDepth,y=g.get("units/".concat(E,"/short")),_=g.get("units/".concat(E,"/long")),x=g.get("terminology/snowDepth/long"),N=function(e){var t=e.value,a=e.decimal;if(!1===(void 0===a||a))return Math.round(t);return t}({value:t,decimal:f});return u.a.createElement("span",{className:i()("snow-depth",a),role:"text"},p&&u.a.createElement("span",{className:"nrk-sr"},x),u.a.createElement("span",{className:i()("snow-depth__value",r)},Object(o.b)(N,b,f))," ",v&&u.a.createElement("abbr",{className:i()("snow-depth__unit",s),title:_},y))}},"eR+e":function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("q1tI"),r=a.n(n);function i(e){var t=e.level,a=e.typography,n=e.children;return r.a.createElement(t,{className:"heading heading--".concat(a)},n)}},i74f:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a("TWl/"),r=a.n(n),i=a("15E1"),o=a("jJcU");function c(e){var t=e.meters,a=e.from,n=e.locale,c=r.a.round(t/1e3,1),l=Object(i.b)(c,n.get("code"));return Object(o.c)(n.get("grammar/kmDistanceFrom"),l,a)}},jz2H:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("q1tI"),r=a.n(n);function i(e){var t=e.className,a=e.index,n=e.length,i=e.lengths,o=n||0,c=e.type;return void 0===n&&void 0!==i&&void 0!==a&&(o=i[a%i.length]),r.a.createElement(c,{className:t},r.a.createElement("span",{className:"empty-text",style:{width:"".concat(o).concat("ch")}}," "))}},lTwk:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a("q1tI"),r=a.n(n),i=a("NGE1"),o=function(){return r.a.createElement("svg",{className:"observations-bar-graph-SVG-defs"},r.a.createElement("defs",null,r.a.createElement("linearGradient",{id:"barGradient",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"0%",style:{stopOpacity:1,stopColor:i.e}}),r.a.createElement("stop",{offset:"100%",style:{stopOpacity:1,stopColor:i.f}})),r.a.createElement("linearGradient",{id:"lighterBarGradient",x1:"0",y1:"0",x2:"0",y2:"1"},r.a.createElement("stop",{offset:"0%",style:{stopOpacity:.4,stopColor:i.e}}),r.a.createElement("stop",{offset:"100%",style:{stopOpacity:.4,stopColor:i.f}})),r.a.createElement("pattern",{id:"missingBarPattern",patternUnits:"userSpaceOnUse",width:4,height:4},r.a.createElement("line",{x1:"0",y1:"0",x2:4,y2:4,stroke:"black",style:{opacity:.25}}),r.a.createElement("line",{x1:"-1",y1:3,x2:"1",y2:5,stroke:"black",style:{opacity:.25}}),r.a.createElement("line",{x1:3,y1:"-1",x2:5,y2:"1",stroke:"black",style:{opacity:.25}}))))}},nmnc:function(e,t,a){var n=a("Kz5y").Symbol;e.exports=n},sEfC:function(e,t,a){var n=a("GoyQ"),r=a("QIyF"),i=a("tLB3"),o="Expected a function",c=Math.max,l=Math.min;e.exports=function(e,t,a){var s,u,d,v,m,f,h=0,p=!1,g=!1,b=!0;if("function"!=typeof e)throw new TypeError(o);function E(t){var a=s,n=u;return s=u=void 0,h=t,v=e.apply(n,a)}function y(e){var a=e-f;return void 0===f||a>=t||a<0||g&&e-h>=d}function _(){var e=r();if(y(e))return x(e);m=setTimeout(_,function(e){var a=t-(e-f);return g?l(a,d-(e-h)):a}(e))}function x(e){return m=void 0,b&&s?E(e):(s=u=void 0,v)}function N(){var e=r(),a=y(e);if(s=arguments,u=this,f=e,a){if(void 0===m)return function(e){return h=e,m=setTimeout(_,t),p?E(e):v}(f);if(g)return clearTimeout(m),m=setTimeout(_,t),E(f)}return void 0===m&&(m=setTimeout(_,t)),v}return t=i(t)||0,n(a)&&(p=!!a.leading,d=(g="maxWait"in a)?c(i(a.maxWait)||0,t):d,b="trailing"in a?!!a.trailing:b),N.cancel=function(){void 0!==m&&clearTimeout(m),h=0,s=f=u=m=void 0},N.flush=function(){return void 0===m?v:x(r())},N}},tGdh:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return o})),a.d(t,"e",(function(){return c})),a.d(t,"f",(function(){return l}));var n="#006edb",r="#9ecfff",i="#627982",o="#006edb",c="#c60000",l="#21292b"},tLB3:function(e,t,a){var n=a("GoyQ"),r=a("/9aa"),i=NaN,o=/^\s+|\s+$/g,c=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,s=/^0o[0-7]+$/i,u=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(r(e))return i;if(n(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=n(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(o,"");var a=l.test(e);return a||s.test(e)?u(e.slice(2),a?2:8):c.test(e)?i:+e}}}]);
//# sourceMappingURL=ObservationsCards-ObservationsCards-61ad2878eb32b94fabbb.js.map